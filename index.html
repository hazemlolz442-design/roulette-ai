<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø±ÙˆÙ„ÙŠØª</title>
  <style>
    body {
      font-family: "Cairo", sans-serif;
      background-color: #f7f9fb;
      color: #222;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #0077cc;
      margin-bottom: 15px;
    }
    input {
      padding: 10px;
      width: 220px;
      border-radius: 10px;
      border: 1px solid #aaa;
      text-align: center;
      margin: 10px 0;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 8px;
      background-color: #0077cc;
      color: white;
      cursor: pointer;
      font-weight: bold;
      font-size: 15px;
    }
    button:hover {
      background-color: #005fa3;
    }
    table {
      margin: 20px auto;
      width: 90%;
      border-collapse: collapse;
      font-size: 15px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 8px;
    }
    th {
      background-color: #0077cc;
      color: white;
    }
    #recommendation {
      margin-top: 20px;
      font-size: 18px;
      background: #eaf4ff;
      display: inline-block;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>ğŸ¯ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø±ÙˆÙ„ÙŠØª</h1>
  <p>Ø§ÙƒØªØ¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ø¨Ø·ÙŠØ® - Ø¨Ø±ØªÙ‚Ø§Ù„ - ØªÙØ§Ø­ - Ø®Øµ - Ø³Ù…Ùƒ - Ø¨Ø±Ø¬Ø± - Ø¬Ù…Ø¨Ø±ÙŠ - Ø¯Ø¬Ø§Ø¬)</p>
  <input id="resultInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‡Ù†Ø§">
  <br />
  <button onclick="addResult()">â• Ø¥Ø¶Ø§ÙØ©</button>
  <button onclick="resetData()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>

  <table id="statsTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ø±Ù…Ø²</th>
        <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª</th>
        <th>Ø§Ù„Ù†Ø³Ø¨Ø©</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div id="recommendation"></div>

  <script>
    let results = [];
    const symbols = ["Ø¨Ø·ÙŠØ®", "Ø¨Ø±ØªÙ‚Ø§Ù„", "ØªÙØ§Ø­", "Ø®Øµ", "Ø³Ù…Ùƒ", "Ø¨Ø±Ø¬Ø±", "Ø¬Ù…Ø¨Ø±ÙŠ", "Ø¯Ø¬Ø§Ø¬"];

    function addResult() {
      const input = document.getElementById("resultInput");
      const value = input.value.trim();
      if (value === "" || !symbols.includes(value)) {
        alert("âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©!");
        return;
      }
      results.push(value);
      input.value = "";
      updateStats();
      generateAIprediction();
    }

    function resetData() {
      results = [];
      document.querySelector("#statsTable tbody").innerHTML = "";
      document.getElementById("recommendation").innerHTML = "";
    }

    function updateStats() {
      const counts = {};
      results.forEach(r => counts[r] = (counts[r] || 0) + 1);
      const tbody = document.querySelector("#statsTable tbody");
      tbody.innerHTML = "";
      const total = results.length;
      Object.entries(counts).forEach(([symbol, count]) => {
        const percent = ((count / total) * 100).toFixed(1);
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${symbol}</td><td>${count}</td><td>${percent}%</td>`;
        tbody.appendChild(tr);
      });
    }

    // Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø°ÙƒÙŠ (Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ø­Ø³ÙˆØ¨Ø© + ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙƒØ±Ø§Ø±)
    function generateAIprediction() {
      if (results.length < 2) {
        document.getElementById("recommendation").innerHTML = "ğŸ”® Ø£Ø¯Ø®Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù†ØªÙŠØ¬ØªÙŠÙ† Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„";
        return;
      }

      const last = results[results.length - 1];
      const patternWeights = {};
      symbols.forEach(sym => (patternWeights[sym] = 1));

      // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ù…Ø·: Ø²ÙŠØ§Ø¯Ø© Ø§Ø­ØªÙ…Ø§Ù„ Ù…Ø§ ÙŠÙ„ÙŠ Ø¢Ø®Ø± Ù†ØªÙŠØ¬Ø©
      for (let i = 0; i < results.length - 1; i++) {
        if (results[i] === last) {
          const next = results[i + 1];
          patternWeights[next] = (patternWeights[next] || 0) + 3; // ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ
        }
      }

      // Ø¥Ø¶Ø§ÙØ© Ø¹Ø§Ù…Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ ØµØºÙŠØ±
      symbols.forEach(sym => {
        patternWeights[sym] += Math.random() * 2;
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª
      const sorted = Object.entries(patternWeights)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 3);

      const totalWeight = sorted.reduce((a, [_, w]) => a + w, 0);

      let html = "ğŸ”® <b>Ø§Ù„ØªÙˆÙ‚Ø¹ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù…:</b><br><br>";
      sorted.forEach(([sym, w], i) => {
        const percent = ((w / totalWeight) * 100).toFixed(1);
        html += `${i + 1}ï¸âƒ£ ${sym} â€” ${percent}%<br>`;
      });

      document.getElementById("recommendation").innerHTML = html;
    }
  </script>
</body>
</html>
